<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>
<body>

<div id="Main">
    <div id="movable"></div>
</div>

<script>
    $("document").ready(function(){
        console.log('page loaded');

        $("#Main")      .css("background-image",    "url('../images/background.png')")
                        .css("width",               "1280")
                        .css("height",              "800")
                        .css("position",            "absolute");

        $("#movable")   .attr("width",              "100px")
                        .attr("height",             "100px")
                        .css("margin-left",         this.positionX)
                        .css("margin-top",          this.positionY)
                        .append("<img id='sprite'></div>");

        $("#sprite")    .attr("width",              "100px")
                        .attr("height",             "100px")
                        .attr("src",                "../images/spaceship.png");

        var movingDirection = [0,0];
        var speed = 10;

        function move(x,y){
            $("#movable")   .css("margin-left",     "+="+x+"px")
                            .css("margin-top",      "+="+y+"px");
        }
        function isMoving(){
            return (movingDirection[0] != 0 || movingDirection[1] != 0)
        }
        $("*").keydown(function(codeKey){
            if(!moving) {
                switch (codeKey.key) {
                    case "Up" :
                        movingDirection[0] = 1;
                        moving = true;
                        break;
                    case "Down" :
                        movingDirection[0] = -1;
                        moving = true;
                        break;
                    case "Right" :
                        movingDirection[1] = 1;
                        moving = true;
                        break;
                    case "Left" :
                        movingDirection[1] = -1;
                        moving = true;
                        break;
                    default :
                        movingDirection[0] = 0;
                        movingDirection[1] = 0;
                        break;
                }
            }
            console.log(movingDirection[0] + " " + movingDirection[1]);
            if(movingDirection[0] != 0 || movingDirection[1] != 0){
                move(   movingDirection[0]*speed,
                        movingDirection[1]*speed);
            }

        });

    });
</script>
</body>
</html>