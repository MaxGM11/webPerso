<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Movement in javascript v1.1</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<link rel="stylesheet" href="style.css">
</head>
<body>

	<p>This sample illustrates how to SMOOTHLY move an object with javascript with keyboard actions :
		using -= and += regarding the keyUP or keyDOWN;
	</p>
	<div id="Main">
		
		<div id="movable">
			<img id='sprite' width='100px' height='100px' src='../images/spaceship.png'></div>
		</div>
	</div>
	<div id="keyIndicator">
		<div id="keyIndicatorUp" class='indicator'></div>
		<div id="keyIndicatorDown" class='indicator'></div>
		<div id="keyIndicatorLeft" class='indicator'></div>
		<div id="keyIndicatorRight" class='indicator'></div>
	</div>
	<div id="moveIndicator">
		<div id="moveIndicatorUp" class='indicator'></div>
		<div id="moveIndicatorDown" class='indicator'></div>
		<div id="moveIndicatorLeft" class='indicator'></div>
		<div id="moveIndicatorRight" class='indicator'></div>
	</div>
	
	<script>
		$("document").ready(function(){
		
			console.log('page loaded');

			var movingDirection = [0,0];
			var speed = 3;

			function move(x,y){
				$("#movable")   .css("margin-left",     "+="+x+"px")
								.css("margin-top",      "-="+y+"px");
			}
			function isMoving(){
				return (movingDirection[0] != 0 || movingDirection[1] != 0)
			}
			
			/*
			*
			*		We get Downed keys 
			*
			*/
			$("*").keydown(function(codeKey){
				switch (codeKey.key) {
					case "Up" :
						$("#keyIndicatorUp").css({backgroundColor:"#ff0000"});
						console.log("keyUp pressed");
						movingDirection[1] += 1;
						break;
					case "Down" :
						console.log("keyDown pressed");
						movingDirection[1] -= 1;
						break;
					case "Right" :
						console.log("keyRight pressed");
						movingDirection[0] += 1;
						break;
					case "Left" :
						console.log("keyLeft pressed");
						movingDirection[0] -= 1;
						break;
				}
			});
			
			/*
			*
			*		We get Up key
			*
			*/
			$("*").keyup(function(codeKey){
				switch (codeKey.key) {
						case "ArrowUp" :
							$("#keyIndicatorUp").css({backgroundColor:"#d3d3d3"});
							movingDirection[1] -= 1;
							break;
						case "ArrowDown" :
							movingDirection[1] += 1;
							break;
						case "ArrowRight" :
							movingDirection[0] -= 1;
							break;
						case "ArrowLeft" :
							movingDirection[0] += 1;
							break;
				}
			});
				
				
			setInterval(function(){
				if(isMoving()){
					/*move(   movingDirection[0]*speed,
							movingDirection[1]*speed);*/
					console.log ("hor:"+movingDirection[0]+"/ver:"+movingDirection[1]);
				}
			},
			100);


		});
	</script>
</body>
</html>